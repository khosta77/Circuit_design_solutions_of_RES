\chapter{Функциональная схема}

	\includeimage{05-circuit-work-device}{f}{H}{1.0\textwidth}
	{Функциональная схема устройства.} % Подпись рисунка

	Идея работы устройства заключается в том, что с компьютера поступают данные о выводимом кадре, через декодер "<FT232L"> они передаются в микроконтроллер по универсальному синхронному приёмопередатчик. В Микроконтроллере DMA модуль записывает в одну из ячеек памяти считанный сектор. После для дисплея происходит настройка на обновление кадра. На порт "<DC"> поступает сигнал равные логической еденице, по последовательному периферийному интерфейсу поступает команда об обновлении кадра. И следом приходит команда о выводе координаты по оси ОХ. На порт DC поступает сигнал равные логическому нулю, По последовательному периферийному интерфейсу поступает левая и правая координата для оси ОХ. Аналогичным образом происходит настройка координат оси ОY. После происходит подтверждение начала передачи путем отправки соответствующей команды, при отправлении команды на выводе "<DC"> логическая единица. После на порт "<DC"> подается логический ноль и начинается передача сектора из памяти. 
	
	Пока происходит передача сектора, то в это время в другую ячейку памяти происходит запись следующего сектора. Эти операции происходят в цикле пока не будет вывед весь кадр.
	
	Так как дисплеи "<ILI"> и "<ST"> имеют одинаковый интерфейс взаимодействия, то не важно какой дисплей будет использоватся.

%	За основу реализации была взята основная схема алгоритма работы внешнего дисплея.

%	\includeimage{05-circuit}{f}{H}{0.8\textwidth}
%	{Функциональная схема монитора.} % Подпись рисунка
	
%	В устройстве используется декодер ''FT232L'', отладочная плата ''STM32F4DISCOVERY'' и дисплеи ''ST7735'', ''ILI9488''. Декодер подключается к компьютеру.
	
%	Соединение монитора с компьютером осуществляется с помощью интерфейса передачи данных USB. Для модуля RS232 используется библиотека ''libftd2xx''. Декодер FT232L. Данные передаются в микроконтроллер по интерфейсу USART. В проекте используется микроконтроллер ''stm32f407vg''. В устройстве возможно использовать различные дисплеи от ST или ILI. Я использовал два дисплея ST7735 и ILI9488. Первый работал в режиме RGB565, то есть 16-bit. Второй в режиме RGB666, 18-bit.
	
%	Схема на рисунке \ref{img:05-My_algorithm_for_displaying_frames_on_the_display} описывает обший алгоритм передачи кадров на дисплей. Соединение монитора с компьютером осуществляется с помощью интерфейса передачи данных USB. Для модуля RS232 используется библиотека ''libftd2xx''. Декодер FT232L. Данные передаются в микроконтроллер по интерфейсу USART. В проекте используется микроконтроллер ''stm32f407vg''. В устройстве возможно использовать различные дисплеи от ST или ILI. Я использовал два дисплея ST7735 и ILI9488. Первый работал в режиме RGB565, то есть 16-bit. Второй в режиме RGB666, 18-bit.

