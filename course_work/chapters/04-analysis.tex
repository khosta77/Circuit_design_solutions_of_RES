\chapter{Принцип работы дисплеев}

	Кадр дисплея представляет из себя трехмерный массив X и Y, в котором координаты пикселя на плоскости, а Z цвет каждого пикселя. 
	
	\includeimage{04-big-display}{f}{H}{0.4\textwidth}
	{Схема разбиения больших экранов на экран по меньше.} % Подпись рисунка
	
	Современные контроллеры обладают достаточным количеством памяти, чтобы хранить небольшие разрешения дисплеев, но с увеличением разрешения дисплея, память микроконтроллера не увеличивается. Решением данной проблемы служит разбиение дисплея на секторы меньшего разрешения. Если разрешение дисплея особо большое, например речь идет о 4К экране для компьютера, секторы такого дисплея дробят еще на более мелкие секторы. Готовые небольшие секторы уже хранятся в памяти парой, и пока происходит вывод одного сектора, для другого происходит процесс отрисовки.
	
	\includeimage{04-alg-obj}{f}{H}{0.9\textwidth}
	{Принципиальная схема подключения дисплея.} % Подпись рисунка
	
	Порт "<RESET"> является выводом аппаратного сброса настроек. Порт "<LED"> явлется выводом анода подсветки дисплея. Порт "<DC"> служит для информирования дисплея о том какой тип данных получает дисплей: "<DC = 1"> дисплей на вход получает команду, "<DC = 0"> дисплей на входе получает данные. Сами данные дисплей получает по последовательному периферийному интерфейсу.
	
	Обновление кадра сектора осуществляется путем разделения внутренний памяти на две ячейки, по ячейки на сектор. Ядром напрямую через последовательный интерфейс передаем координаты выводимого сектора. После начинается DMA передача данных сектора. Пока идет передача сектора, другой сектор готовится к передаче. Данные процессы должны быть синхронизированы, чтобы пока готовился один кадр, выводился другой. Соответвсенно после выводятся та область памяти, которая готовилась к передаче, а так которая уже вывелась меняться с ней местами.

%	Компактные мониторы делятся на группы:
	
%	\begin{enumerate}
%		\item Для персональных компьютеров. Используют для подключения интерфейсы HDMI, DP и т. д. Представляют из себя обычные мониторы, с меньшей диагональю.
%		\item Для микрокомпьютеров на подобии Rasberry Pi. Подключаются по выведенному на плате интерфейсу ввода/вывода. Диагональ не больше четырех дюймов.
%	\end{enumerate}
	
%	 Моя реализация компактного монитора будет схожа со второй группой. Интерфейс HDMI является закрытым и использовать его возможно только по лицензии, реализация монитора соответствующей первой группе будет затруднительной.
	 
%	 Мониторы для микрокомпьютеров используют интерфейсы для передачи данных на дисплей: SPI, LVDS, LTDS и т. д.
	 
%	 \includeimage{04-General_principle_of_operation_of_a_compact_display}{f}{H}{0.6\textwidth}
%	 {Алгоритм работы компактного дисплея} % Подпись рисунка
	 
%	 В приближенном виде с компьютера по одному из возможных интерфейсов поступает сигнал о начале передаче данных. В ходе передачи происходит декодирование данных и последующая передача их в микроконтроллер. Который обновляет кадр на дисплее.
	 
%	 В некоторых случаях декодер может быть встроен в микроконтроллер дисплея.