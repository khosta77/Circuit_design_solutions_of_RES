\chapter{Исследовательский раздел}

% 1 сказать что было при запуске
% 2 второй описать алгоритм
% 3 сказать какие попытки были предприняты для решения проблемы
% 4 сказать что проблема была решена таким способом
% 5 показать результат

	При запуске программы с дисплеем ST7735 настроенным на 16-битный режим работы на монитор была выведена картинка с потерянными цветами.
	
	\includeimage
	{07-no-cool_16_bit}{f}{H}{0.4\textwidth}
	{Не корректное тестовое изображение в 16-битном формате.} % Подпись рисунка
	
	Была выдвинута гипотезака, что проблемой некорректной цвето передачи была не правильная формула конвертации увета из RGB888 в RGB565.
	
	\[\text{RGB565} = ((\text{R } \& \text{ 0b}11111000) << 8) | ((\text{G } \& \text{ 0b}11111100) << 3) | (\text{B} >> 3)\]
	
	Но проверив отрисовку цвета по этой формуле без привязки к работе с компьютером было подтверждено, что формула корректная. В качестве проверки себя, были перепроверены результаты на выходе при входе разных цветов. То есть на вход G был подан R или B и аналогично для других. Отдельно на компьютере был проверен алгоритм чтения и записи снимков, который работал корректно.
	
	Для проверки перешел с 16-битного дисплея на 18-битный дисплей ILI9488.
	
	\includeimage
	{07-no-cool_18_bit}{f}{H}{0.33\textwidth}
	{Не корректное тестовое изображение в 18-битном формате.} % Подпись рисунка
	
	Результатом на выходе работы устройства была от зеркальная фотография, в которой были не корректные цвета. После того как в программу были добавлены строчки кода, которые при считывании снимка производили его о тзеркаливание и разворот цвета, то картинка вывелась успешно.
	
	\includeimage
	{07-cool_18_bit}{f}{H}{0.33\textwidth}
	{Исправленное тестовое изображение в 18-битном формате.} % Подпись рисунка
	
	И соответвственно в 16-битном формате тоже был корректный вывод.
	
	\includeimage
	{07-cool_16_bit}{f}{H}{0.4\textwidth}
	{Исправленное тестовое изображение в 16-битном формате.} % Подпись рисунка
	
	В результате исследования является уточнение особенности работы пары микроконтроллер-декодер где на вход модуля должны приходить данные в от зеркальном виде.
	
	Готовый код проекта монитора выложен в открытом доступе на сайте github в отдельном \href{https://github.com/khosta77/stm32f4_ILI9488}{репозитории для физического устройства}. Для \href{https://github.com/khosta77/ft2xx_fast_start}{драйвера} на компьютер.
	
	